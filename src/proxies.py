import requests
import random

PROXIES = [
    '46.4.242.214:1337',
    '81.4.102.223:8081',
    '170.39.193.86:3128',
    '81.4.102.233:8081',
    '81.4.122.143:8081',
    '5.78.82.49:8080',
    '82.210.8.173:80',
    '125.17.80.229:8080',
    '82.102.11.74:443',
    '5.75.187.37:8080',
    '91.107.235.32:8080',
    '91.107.227.18:8080',
    '46.101.98.102:8080',
    '168.119.237.176:8080',
    '31.186.239.245:8080',
    '51.91.100.252:443',
    '54.37.105.157:8080',
    '134.122.58.174:80',
    '34.140.197.165:8080',
    '31.186.239.244:8080',
    '13.95.107.107:80',
    '89.208.219.121:8080',
    '3.24.58.156:3128',
    '8.219.176.202:8080',
    '202.65.192.252:80',
    '146.56.136.237:9090',
    '103.23.199.28:8080',
    '200.105.215.22:33630',
    '223.205.110.208:8080',
    '103.154.91.182:8080',
    '82.146.48.200:8000',
    '43.153.71.78:19090',
    '164.68.123.119:9300',
    '79.174.25.125:3128',
    '103.226.142.26:80',
    '5.78.82.19:8080',
    '103.160.15.38:3125',
    '79.174.25.124:3128',
    '157.230.226.230:1202',
]

timeout = 10

def get_valid_proxy(timeout=timeout, retries=10):
    random.shuffle(PROXIES)
    for proxy in PROXIES:
        retries_left = retries
        while retries_left > 0:
            try:
                response = requests.get('https://www.google.com', proxies=proxy, timeout=timeout)
                if response.status_code == 200:
                    return proxy
            except (requests.exceptions.Timeout, requests.exceptions.ProxyError) as e:
                print("Error:", e)
            retries_left -= 1
    raise ValueError('No valid proxies found.')